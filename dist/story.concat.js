String.prototype.has=function(t){return-1!=this.indexOf(t)},String.prototype.isNumber=function(){return!isNaN(this)},String.prototype.toNumber=function(){return+this};var Utils=new Class({defaultFor:function(t,n){return"undefined"!=typeof t?t:n},randomString:function(t){t=this.defaultFor(t,5);for(var n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;t>o;o++)n+=r.charAt(this.randomInt(r.length));return n},randomInt:function(t){return Math.floor(Math.random()*this.defaultFor(t,2))}});
var Class=function(){function e(e,t){for(var n in t)if("extend"!==n&&"static"!==n&&"typeOf"!==n&&"mixin"!==n){if("object"==typeof t[n]||"function"==typeof t[n])return void(e[n]=t[n]);n===n.toUpperCase()?(Object.defineProperty(e,n,{writable:!1,configurable:!1,enumerable:!0,value:t[n]}),Object.defineProperty(e.prototype,n,{writable:!1,configurable:!1,enumerable:!0,value:t[n]})):(Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e}}),Object.defineProperty(e.prototype,n,{get:function(){return t[n]},set:function(e){t[n]=e}}))}}function t(e,t,n){n=n||!1;for(var r in t)"create"===r&&!n||"typeOf"===r||"mixin"===r||"static"===r||"extend"===r||(e[r]=t[r])}return function(n){var r=!1;return function i(n,o){var f,c=[],u=o.hasOwnProperty("singleton")&&o.singleton,a=function(){if("function"==typeof this.create&&r===!1&&this.create.apply(this,arguments),o.hasOwnProperty("get"))for(var e in o.get){var t="set"in o&&e in o.set?o.set[e]:null;null!==t?(delete o.set[e],Object.defineProperty(this,e,{get:o.get[e],set:t})):Object.defineProperty(this,e,{get:o.get[e]})}if(o.hasOwnProperty("set"))for(var e in o.set)Object.defineProperty(this,e,{set:o.set[e]});if(u&&"undefined"!=typeof this)throw new Error("Singleton object cannot have more than one instance, call instance method instead")};null!==n&&(r=!0,a.prototype=new n,r=!1);var s=a.prototype;return s.typeOf=function(e){if("object"==typeof e)return c.indexOf(e)>=0;if("function"==typeof e){if(this instanceof e)return!0;if(c.indexOf(e)>=0)return!0}return!1},"function"==typeof o&&(o=o()),t(s,o,!0),a["static"]=function(t){return e(a,t),a},a.mixin=function(){for(var e=0,n=arguments.length;n>e;e++){var r=arguments[e];if("function"==typeof r)var i=r.prototype;else{if("object"!=typeof r)throw new Error("js.class mixin method accepts only types: object, function - `"+typeof r+"` type given");var i=r}t(s,i,!1),c.push(r)}return a},u?(a.extend=function(){throw new Error("Singleton class cannot be extended")},a.instance=function(){return f||(u=!1,f=new a,u=!0),f}):a.extend=function(e){return i(this,e)},a}(null,n)}}();
var Cookie=new Class({data:{},create:function(){0!==document.cookie.length&&this.read()},read:function(){this.data={};try{for(var t=document.cookie.split("|"),e=0;e<t.length;e++){var o=t[e].split(":");o[1].isNumber()&&(o[1]=o[1].toNumber()),this.data[o[0]]=o[1]}}catch(a){console.log("Error reading the cookie with error: ",a.message)}},save:function(){document.cookie="";for(var t in this.data)this.data.hasOwnProperty(t)&&(document.cookie+=t+":"+this.data[t]+"|");document.cookie=document.cookie.slice(0,-1)},add:function(t,e){if("undefined"===this.data[t])throw"Key already exists";this.data[t]=e},remove:function(t){try{delete this.data[t]}catch(e){throw"No such key"}},change:function(t,e){if("undefined"===this.data[t])throw"No such key";this.data[t]=e}});
var cookie=new Cookie,utils=new Utils,Story=new Class({create:function(){0===cookie.data.length&&this.login()},login:function(){var e=prompt("Enter your Story Id to pick up where you left off or cancel to create a new game");(null===e||""===e)&&cookie.add("story_id",1e3*Math.random())},save:function(){this._getCurrentPageName()},_getCurrentPageName:function(){var e=window.location.pathname,t=e.split("/");return 1==t.length?"index":t.pop().split(".")[0]}});